from pathlib import Path
path = Path("scripts/compare_probability_vs_truecolor.py")
text = path.read_text()
old = "    fig, axs = plt.subplots(1, 3, figsize=(16, 6))\n\n    axs[0].imshow(Image.open(modis_path))\n    axs[0].set_title(f\"MODIS True Color\\n{date_iso}\")\n    axs[0].axis(\"off\")\n\n    im1 = axs[1].pcolormesh(lon, lat, sst, cmap=\"turbo\")\n    axs[1].set_title(\"SST MUR (°C)\")\n    axs[1].set_xlabel(\"Longitude\")\n    axs[1].set_ylabel(\"Latitude\")\n    fig.colorbar(im1, ax=axs[1], shrink=0.75)\n\n    im2 = axs[2].imshow(np.ma.masked_invalid(proba), origin=\"upper\", extent=extent, cmap=\"viridis\", vmin=0, vmax=1)\n    axs[2].set_title(\"Probabilidade de hotspot\")\n    axs[2].set_xlabel(\"Longitude\")\n    axs[2].set_ylabel(\"Latitude\")\n    fig.colorbar(im2, ax=axs[2], shrink=0.75, label=\"Probabilidade\")\n\n    fig.suptitle(f\"Comparacao MODIS x Cientifico x Modelo — {date_iso}\", fontsize=14)";
new = "    grad = ds[\"sst_gradient\"].squeeze()\n    grad_vals = grad.values\n\n    fig, axs = plt.subplots(1, 4, figsize=(21, 6))\n\n    axs[0].imshow(Image.open(modis_path))\n    axs[0].set_title(f\"MODIS True Color\\n{date_iso}\")\n    axs[0].axis(\"off\")\n\n    im1 = axs[1].pcolormesh(lon, lat, sst, cmap=\"turbo\")\n    axs[1].set_title(\"SST MUR (degC)\")\n    axs[1].set_xlabel(\"Longitude\")\n    axs[1].set_ylabel(\"Latitude\")\n    fig.colorbar(im1, ax=axs[1], shrink=0.75)\n\n    im2 = axs[2].pcolormesh(lon, lat, grad_vals, cmap=\"inferno\")\n    axs[2].set_title(\"Gradiente SST\")\n    axs[2].set_xlabel(\"Longitude\")\n    axs[2].set_ylabel(\"Latitude\")\n    fig.colorbar(im2, ax=axs[2], shrink=0.75, label=\"abs(dT)\")\n\n    proba = np.flipud(proba)\n    im3 = axs[3].imshow(np.ma.masked_invalid(proba), origin=\"lower\", extent=extent, cmap=\"viridis\", vmin=0, vmax=1)\n    axs[3].set_title(\"Probabilidade de hotspot\")\n    axs[3].set_xlabel(\"Longitude\")\n    axs[3].set_ylabel(\"Latitude\")\n    fig.colorbar(im3, ax=axs[3], shrink=0.75, label=\"Probabilidade\")\n\n    fig.suptitle(f\"Comparacao MODIS x Cientifico x Modelo — {date_iso}\", fontsize=14)";
path.write_text(text.replace(old, new))
